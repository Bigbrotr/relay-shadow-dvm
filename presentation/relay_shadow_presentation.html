<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relay Shadow DVM - Intelligent Relay Selection for Nostr</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .grid {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        .card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .card-content {
            color: #4a5568;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 5px 0;
            position: relative;
            padding-left: 20px;
        }

        .feature-list li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }

        .problem-card {
            background: #fed7d7;
            border: 1px solid #fc8181;
            color: #742a2a;
        }

        .solution-card {
            background: #c6f6d5;
            border: 1px solid #68d391;
            color: #22543d;
        }

        .code-block {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
        }

        .highlight {
            background: #fef5e7;
            padding: 20px;
            border-left: 4px solid #ed8936;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .tech-item {
            background: #edf2f7;
            color: #2d3748;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
        }

        .bigbrotr-highlight {
            background: #e6fffa;
            border: 1px solid #4fd1c7;
            color: #234e52;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .title { font-size: 2rem; }
            .badges { flex-direction: column; align-items: center; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title">üîÆ Relay Shadow DVM</h1>
            <p class="subtitle">Intelligent Relay Selection for Nostr Networks</p>
            <div class="badges">
                <span class="badge">Nostr DVM</span>
                <span class="badge">Open Source</span>
                <span class="badge">MIT License</span>
            </div>
        </div>

        <div class="content">
            <!-- The Problem -->
            <div class="section">
                <h2 class="section-title">‚ùå The Problem</h2>
                <div class="grid grid-2">
                    <div class="card problem-card">
                        <h3 class="card-title">üè¢ Nostr Centralization Risk</h3>
                        <div class="card-content">
                            <p>Despite being designed as a decentralized protocol, Nostr suffers from practical centralization issues:</p>
                            <ul class="feature-list">
                                <li>Most users connect to the same popular relays</li>
                                <li>Default relay lists create single points of failure</li>
                                <li>Geographic concentration reduces censorship resistance</li>
                                <li>Network effects favor well-known relays over diverse options</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card problem-card">
                        <h3 class="card-title">‚ùì No Selection Logic</h3>
                        <div class="card-content">
                            <p>Users lack proper tools and techniques for intelligent relay selection:</p>
                            <ul class="feature-list">
                                <li>No standardized method for evaluating relay quality</li>
                                <li>Privacy and security considerations are ignored</li>
                                <li>Performance metrics are not easily accessible</li>
                                <li>Social and network effects are not considered</li>
                                <li>Users make random or uninformed choices</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <strong>The Core Issue:</strong> Without intelligent relay selection, Nostr's decentralization promise remains unrealized, leaving users vulnerable to censorship, surveillance, and network failures.
                </div>
            </div>

            <!-- The Solution -->
            <div class="section">
                <h2 class="section-title">‚úÖ The Solution</h2>
                <div class="card solution-card">
                    <h3 class="card-title">üéØ Relay Shadow DVM</h3>
                    <div class="card-content">
                        <p>An intelligent Nostr Data Vending Machine that provides data-driven relay recommendations based on comprehensive network analysis. By leveraging real usage patterns and network topology data, it enables users to make informed decisions about their relay selection strategy.</p>
                    </div>
                </div>

                <div class="bigbrotr-highlight">
                    <h3>üöÄ Powered by BigBrotr Infrastructure</h3>
                    <p>This solution is only possible thanks to <strong>BigBrotr</strong> - a comprehensive full indexing infrastructure for Nostr events and relays. BigBrotr provides:</p>
                    <ul class="feature-list">
                        <li><strong>Complete Event Indexing:</strong> Full coverage of Nostr event distribution across the network</li>
                        <li><strong>Relay Monitoring:</strong> Continuous tracking of 800+ relays with performance metrics</li>
                        <li><strong>Network Topology Analysis:</strong> Real-time understanding of how events flow through the network</li>
                        <li><strong>Historical Data:</strong> Long-term patterns and trends for informed analysis</li>
                        <li><strong>Metadata Collection:</strong> Comprehensive relay information including policies and capabilities</li>
                    </ul>
                </div>
            </div>

            <!-- Key Features -->
            <div class="section">
                <h2 class="section-title">‚ú® Key Features</h2>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üõ°Ô∏è Privacy-Focused Analysis</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Threat-level based recommendations</li>
                                <li>Censorship resistance evaluation</li>
                                <li>Privacy policy analysis</li>
                                <li>Geographic diversity optimization</li>
                                <li>Tor compatibility assessment</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìä Data-Driven Intelligence</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Real usage patterns from 800+ relays</li>
                                <li>Publisher influence scoring</li>
                                <li>Network health monitoring</li>
                                <li>Social graph integration</li>
                                <li>Performance benchmarking</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">‚ö° DVM Integration</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Nostr-native recommendation service</li>
                                <li>Personalized relay suggestions</li>
                                <li>Current setup analysis</li>
                                <li>Real-time status updates</li>
                                <li>Automated optimization strategies</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üîç Comprehensive Metrics</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Uptime and reliability tracking</li>
                                <li>Latency and performance data</li>
                                <li>Event distribution patterns</li>
                                <li>Network connectivity analysis</li>
                                <li>Policy compliance verification</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Architecture -->
            <div class="section">
                <h2 class="section-title">üèóÔ∏è System Architecture</h2>
                <div class="highlight">
                    <strong>Data Flow:</strong> BigBrotr Database ‚Üí Analytics Processing ‚Üí DVM Intelligence ‚Üí Nostr Recommendations
                </div>

                <div class="grid grid-3">
                    <div class="card">
                        <h3 class="card-title">üìà Analytics Engine</h3>
                        <div class="card-content">
                            Processes BigBrotr data to compute relay quality scores across multiple dimensions including privacy, performance, and network health.
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üîí Privacy Scorer</h3>
                        <div class="card-content">
                            Evaluates relays based on threat models, censorship resistance, geographic diversity, and privacy policies.
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üë• Social Analyzer</h3>
                        <div class="card-content">
                            Analyzes social networks and following patterns to provide personalized recommendations based on user connections.
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üíö Health Monitor</h3>
                        <div class="card-content">
                            Continuously monitors relay status, uptime, performance, and connectivity across the entire network.
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üîå DVM Server</h3>
                        <div class="card-content">
                            Handles Nostr protocol integration, request processing, and response generation for seamless user interaction.
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üåê Web Interface</h3>
                        <div class="card-content">
                            Provides an intuitive web-based demonstration and testing interface for exploring recommendations.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scoring System -->
            <div class="section">
                <h2 class="section-title">üìä Scoring System</h2>
                <div class="highlight">
                    <strong>Multi-Dimensional Algorithm:</strong> Each relay is evaluated across 6 main dimensions, with scores from 0 to 10, to obtain a weighted overall score.
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üîí Privacy Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Privacy Score Calculation
CASE 
    WHEN privacy_policy AND terms_of_service THEN 8.0
    WHEN privacy_policy OR terms_of_service THEN 5.0
    WHEN name AND description THEN 3.0
    ELSE 1.0
END +
CASE 
    WHEN auth_required = false THEN 2.0
    ELSE 0.0
END</div>
                            <ul class="feature-list">
                                <li><strong>8+ points:</strong> Complete privacy policy and ToS</li>
                                <li><strong>5+ points:</strong> At least one of the two documents</li>
                                <li><strong>+2 points:</strong> No authentication required</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üåê Diversity Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Diversity Score Calculation
LEAST(LOG(unique_publishers + 1) * 2.0, 10.0)</div>
                            <ul class="feature-list">
                                <li><strong>Metric:</strong> Number of unique publishers</li>
                                <li><strong>Calculation:</strong> Natural logarithm to avoid dominance</li>
                                <li><strong>Maximum:</strong> Capped at 10 points</li>
                                <li><strong>Objective:</strong> Favor user diversity</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">‚ö° Performance Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Performance Score Calculation
CASE 
    WHEN avg_rtt_read < 2000ms THEN 
        10.0 - (avg_rtt_read / 200.0)
    WHEN avg_rtt_read IS NULL THEN 5.0
    ELSE 1.0
END</div>
                            <ul class="feature-list">
                                <li><strong>Metric:</strong> Average Round Trip Time</li>
                                <li><strong>Optimal:</strong> < 200ms = 10 points</li>
                                <li><strong>Acceptable:</strong> < 2000ms = linear scaling</li>
                                <li><strong>Unknown:</strong> 5 points (neutral)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üíö Reliability Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Reliability Score Calculation
uptime_percentage * 10.0</div>
                            <ul class="feature-list">
                                <li><strong>Metric:</strong> Uptime percentage</li>
                                <li><strong>99% uptime:</strong> 9.9 points</li>
                                <li><strong>95% uptime:</strong> 9.5 points</li>
                                <li><strong>Minimum threshold:</strong> 90% to be considered</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìà Activity Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Activity Score Calculation
CASE 
    WHEN events_per_day BETWEEN 5 AND 500 THEN 10.0
    WHEN events_per_day BETWEEN 1 AND 1000 THEN 
        8.0 - ABS(LOG(events_per_day) - LOG(50)) * 0.5
    ELSE 3.0
END</div>
                            <ul class="feature-list">
                                <li><strong>Optimal zone:</strong> 5-500 events/day</li>
                                <li><strong>Penalty:</strong> Too few or too many events</li>
                                <li><strong>Target:</strong> ~50 events/day</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üë• Social Score (0-10)</h3>
                        <div class="card-content">
                            <div class="code-block">-- Social Score Calculation
AVG(publisher_influence_weight) + recency_bonus</div>
                            <ul class="feature-list">
                                <li><strong>Influencer Weight:</strong> Average of user weights</li>
                                <li><strong>Recency Bonus:</strong> +2 points if active in last 30 days</li>
                                <li><strong>Personalization:</strong> Based on user's following list</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <h3>üéØ Final Score</h3>
                    <div class="code-block">final_score = (privacy_score * 0.25) + (diversity_score * 0.20) + 
              (performance_score * 0.15) + (reliability_score * 0.20) + 
              (activity_score * 0.10) + (social_score * 0.10)</div>
                    <p>Weights can be customized based on user's threat level (privacy > performance for high threat level).</p>
                </div>
            </div>

            <!-- DVM Services -->
            <div class="section">
                <h2 class="section-title">üõ†Ô∏è DVM Services</h2>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">1. üéØ Relay Recommendations</h3>
                        <div class="card-content">
                            <h4>Input:</h4>
                            <div class="code-block">{
  "threat_level": "high|medium|low",
  "use_case": "privacy|performance|balanced",
  "max_results": 5,
  "geographic_preferences": ["EU", "non-5eyes"],
  "require_tor": true,
  "exclude_relays": ["wss://relay1.com"]
}</div>
                            <h4>Output:</h4>
                            <div class="code-block">{
  "recommendations": {
    "primary": [
      {
        "url": "wss://privacy-relay.swiss",
        "scores": {
          "overall": 9.2,
          "privacy": 9.8,
          "reliability": 8.9
        },
        "features": {
          "no_logs": true,
          "tor_supported": true,
          "uptime_percentage": 99.2
        },
        "reasoning": "Excellent privacy protections..."
      }
    ],
    "backup": [...],
    "discovery": [...]
  }
}</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">2. üîç Relay Setup Analysis</h3>
                        <div class="card-content">
                            <h4>Input:</h4>
                            <div class="code-block">{
  "current_relays": [
    "wss://relay.damus.io",
    "wss://relay.snort.social",
    "wss://nostr.wine"
  ],
  "user_pubkey": "npub1...",
  "analysis_depth": "basic|detailed"
}</div>
                            <h4>Output:</h4>
                            <div class="code-block">{
  "analysis": {
    "overall_score": 6.4,
    "strengths": [
      "High reliability (98.5% avg uptime)",
      "Good performance (avg 150ms latency)"
    ],
    "weaknesses": [
      "Geographic concentration (80% US-based)",
      "Limited privacy policies",
      "Popular relay dependency"
    ],
    "recommendations": [
      {
        "action": "add",
        "relay": "wss://eu-relay.example.com",
        "reason": "Improve geographic diversity"
      },
      {
        "action": "replace",
        "current": "wss://relay.wine",
        "suggested": "wss://privacy-relay.ch",
        "reason": "Better privacy score"
      }
    ]
  }
}</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">3. üíö Network Health Monitoring</h3>
                        <div class="card-content">
                            <h4>Input:</h4>
                            <div class="code-block">{
  "relay_url": "wss://relay.example.com",
  "metrics": ["uptime", "latency", "events", "all"],
  "time_range": "24h|7d|30d",
  "compare_to": "network_average"
}</div>
                            <h4>Output:</h4>
                            <div class="code-block">{
  "health_report": {
    "relay_url": "wss://relay.example.com",
    "period": "7d",
    "metrics": {
      "uptime": {
        "value": "98.2%",
        "vs_network": "+2.1%",
        "trend": "stable"
      },
      "avg_latency": {
        "value": "145ms",
        "vs_network": "-20ms",
        "trend": "improving"
      },
      "events_processed": {
        "value": "12,450",
        "vs_network": "average",
        "trend": "growing"
      }
    },
    "alerts": [
      "Outage detected: 2 hours on 2025-01-08"
    ],
    "recommendation": "Reliable relay with good performance"
  }
}</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">4. üß≠ Discovery & Exploration</h3>
                        <div class="card-content">
                            <h4>Input:</h4>
                            <div class="code-block">{
  "discovery_type": "geographic|niche|performance|privacy",
  "current_setup": ["wss://relay1.com", "wss://relay2.com"],
  "following_pubkeys": ["npub1...", "npub2..."],
  "explore_criteria": {
    "min_uptime": 95,
    "max_latency": 300,
    "languages": ["en", "it"]
  }
}</div>
                            <h4>Output:</h4>
                            <div class="code-block">{
  "discoveries": {
    "geographic": [
      {
        "relay": "wss://asia-relay.nostr.com",
        "region": "Asia-Pacific",
        "benefit": "24/7 coverage improvement",
        "score": 8.1
      }
    ],
    "niche": [
      {
        "relay": "wss://artist-relay.studio",
        "specialty": "Art & Creative Community",
        "user_overlap": "15% of your follows",
        "score": 7.8
      }
    ],
    "hidden_gems": [
      {
        "relay": "wss://underground.relay",
        "why_hidden": "High quality, low visibility",
        "advantages": ["Excellent privacy", "Low latency"],
        "score": 9.0
      }
    ]
  }
}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Use Cases -->
            <div class="section">
                <h2 class="section-title">üéØ Use Cases</h2>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üîí High-Privacy Users</h3>
                        <div class="card-content">
                            <p><strong>Scenario:</strong> Journalists, whistleblowers, activists</p>
                            <p><strong>Service:</strong> Relay Recommendations with threat_level="high"</p>
                            <p><strong>Output:</strong> Relays with no-log policies, Tor support, geographic diversity</p>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üì± Content Creators</h3>
                        <div class="card-content">
                            <p><strong>Scenario:</strong> Influencers, artists, brands seeking maximum reach</p>
                            <p><strong>Service:</strong> Discovery & Exploration + Setup Analysis</p>
                            <p><strong>Output:</strong> High-performance relays with large user bases</p>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üè¢ Enterprise Users</h3>
                        <div class="card-content">
                            <p><strong>Scenario:</strong> Companies requiring compliance and reliability</p>
                            <p><strong>Service:</strong> Continuous Network Health Monitoring</p>
                            <p><strong>Output:</strong> Relays with clear SLAs, defined policies, guaranteed uptime</p>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üåç Global Users</h3>
                        <div class="card-content">
                            <p><strong>Scenario:</strong> Users in countries with restrictions or censorship</p>
                            <p><strong>Service:</strong> All 4 services for comprehensive strategy</p>
                            <p><strong>Output:</strong> Geographically distributed and resilient relay portfolio</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Benefits -->
            <div class="section">
                <h2 class="section-title">üåü Benefits</h2>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üë§ For Users</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Data-driven decisions instead of guesswork</li>
                                <li>Enhanced personalized privacy and security</li>
                                <li>Improved resilience against failures and censorship</li>
                                <li>Recommendations that adapt to individual needs</li>
                                <li>Reduced dependency on mainstream relays</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üåê For the Nostr Ecosystem</h3>
                        <div class="card-content">
                            <ul class="feature-list">
                                <li>Promotes true traffic decentralization</li>
                                <li>Increases network diversity and distribution</li>
                                <li>Supports smaller and niche relay operators</li>
                                <li>Improves overall network health</li>
                                <li>Advances privacy and security best practices</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conclusion -->
            <div class="section">
                <h2 class="section-title">üí° Conclusion</h2>
                <div class="highlight">
                    <h3>Solving Nostr's Centralization Challenge</h3>
                    <p>Relay Shadow DVM addresses the fundamental problem of relay centralization in Nostr by providing intelligent, data-driven selection tools. Built on the comprehensive BigBrotr infrastructure, it empowers users to make informed decisions that promote true decentralization while meeting their specific privacy and performance requirements.</p>
                    
                    <p>By transforming relay selection from a random choice into an intelligent decision, we're helping realize Nostr's vision of a truly decentralized and censorship-resistant communication protocol.</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>